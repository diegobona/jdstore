<h3>购物车详情</h3>


<table class="table table-hover">
	<thead>
		<tr>
			<th scope="col">商品名称</th>
			<th scope="col">商品图片</th>
			<th scope="col">商品价格</th>
			<th scope="col">商品数量</th>
      <th scope="col">总价</th>
			<th scope="col">操作</th>
		</tr>
	</thead>
	<tbody>
		<%# <% @cart.cart_items.each do |cartItem|%>
    <%# 直接从helper函数调用get_current_cart方法，则不需要访问controller中变量@cart，这样controller中的show action暂也不需定义 %>
    <% get_current_cart.cart_items.each do |cartItem|%>
		<tr>
			<td><%=link_to(cartItem.product.title,product_path(cartItem.product))%></td>
			<td>
        <%=link_to(product_path(cartItem.product)) do%>
          <%= image_tag(cartItem.product.product_img.thumb.url)%>
        <%end%>
      </td>
      <td><%= cartItem.product.price %></td>
			<td><%= cartItem.quantity %></td>
      <td><%= cartItem.quantity*cartItem.product.price %></td>
			<td>
				<%# <%= link_to("删除",cart_cart_item_path(@cart,@cart_item),{method: :delete,data:{confirm:"确定删除吗"}}) %>
			</td>
		</tr>
		<% end%>
	</tbody>
</table>

<div class="total clearfix">
      <span class="pull-right">
         <span> 总计 xxx RMB  </span>
      </span>
</div>

    <hr>

<div class="checkout ">
      <%= link_to("确认结账", "#", method: :post, class: "btn btn-lg btn-danger pull-right") %>
</div>
